
<style>
    .divjob{
        padding:20px;
        height:auto;
        line-height: 35px;
    }
    .divin{
        width: 100% !important;
        background-color: rgb(177, 192, 192);
        margin-top:70px;
        justify-content: center;
        height: 200px;
        border-radius: 5px;
        box-shadow : 0px  10px  5px -10px  #333 ;
    }
    .flex{
        display:flex;flex-wrap: nowrap;
        flex-grow:0;
    }
    .diviner{
        width:60%;
        background-color:rgb(75, 64, 49,0.2); ;
        align-self: center;
        border-radius: 5px;
    }


    #sub{
        transform: scale(1);
        margin-left: 10px;
        border-radius: 5px;
        height:50px;
        align-self: center;
        background-color: rgb(213, 241, 231);
        transition: .2s;
        box-shadow: 1px 2px 1px;
    }
    #sub:active{
        transform: scale(0.85);
    }
    .opin{
        height:110px;
    }
    .h4_title h4{
        margin-right: 20px;
        display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
    }
    .job_div{
        overflow: hidden;
        margin-left:6%;
        width:87%;
        height: auto;
        border: 2px solid rgb(18, 17, 17);
        margin-top:0px;
        border-radius: 5px;
        color:black;
        font-family:sans-serif;
        padding-left:20px;
        padding-top: 10px;
        background-color: rgb(203, 188, 167);
    }

    h3,h5{
        font-weight:bold;
    }
    hr.y{
    height:auto;
    width:5px;
    border-width:0;
    color:#000;
    background-color:rgba(20, 8, 8, 0.51);
    }
    .job_local{
        margin-top: 30px;
    }
    a.title:hover{
        color: darkorange;
        font-size: 25px;
        font-weight: bolder;
    }
    a.title{
        text-decoration: none;
        font-weight: bold;
    }
    .font_bold{
        font-weight: bold;
    }
    .pagediv{
        width: auto;
        padding-bottom: 20px;
    }
    span.pagediv p{
        display: inline;
    }
    .text-al{
        text-align: center;
    }
    option.text-al{
        border-radius: 5px;
    }

    div.divjob img{
        margin-left: 0%;
        width: 80px;
        height: 100px;
        margin-bottom: -10px;
        margin-top: -10px;
    }
    .inner_county:hover{
      background-color: #a8d2d69d;
    }
    .love{
        border: none;
        position: absolute;
        right: 10px;
        margin-left: 100px;
        top:8%;
        background-color: rgba(130, 211, 211, 0);

    }
    button.love #love1{
        display: block;
        position: absolute;
    }
    button.love #love2{
        position: absolute;
        display:none;
        color: rgb(238, 40, 69);
    }
    button.love #love1yes{
        display:none;
        position: absolute;
    }
    button.love #love2yes{
        position: absolute;
        display: block;
        color: rgb(238, 40, 69);
    }
    #love1:hover{
        color: rgb(191, 104, 121);
    }
    .diviner input,.diviner select{
        text-indent: 10px;
    }
    .relative{
        position: relative;
    }
    .job_name h4{
        display:inline;
    }
    span.skillgreen{
        background-color: rgba(185, 241, 185, 0.5);
        padding-left: 10px;
        border-radius: 10px;
        margin-left: 10px;
        margin-bottom: 10px;
    }
    span.skillno{
        background-color: rgba(87, 92, 89, 0.5);
        padding: 3px;
        border-radius: 10px;
        margin-left: 10px;
        margin-top: -2px;
        padding-top: -2px;
        cursor: pointer;
        padding-bottom: -2px;
    }
    span.skillred{
        background-color: rgba(239, 146, 146, 0.5);
        border-radius: 10px;
        padding-left: 10px;
        margin-left: 10px;
        cursor: pointer;
        transition: 0.5s;
        margin-bottom: 10px;
    }
    span.skillred:hover,span.skillgrey:hover{
        background-color: rgba(198, 245, 204, 0.5);
        color: green !important;
    }
    span.skillgrey{
        background-color: rgba(219, 219, 219, 0.5);
        border-radius: 10px;
        padding-left: 10px;
        margin-left: 10px;
        cursor: pointer;
        transition: 0.5s;
        margin-bottom: 10px;
    }
    .inner_county_local:hover{
      background-color: #bed6d8;
      border-radius: 10px;
    }
    .inner_county_local{
      display: inline-block;
      width: 47%;
      padding-top: 10px;
      padding-left: 40px;
      padding-bottom: 10px;
      border-radius: 6px;
      color: #000;
    }
    .select_skill{ display: flex !important; flex-wrap: wrap;
        background-color: rgb(212, 222, 232);
        border-radius: 10px;
        padding: 30px;
        padding-top: 40px;
        box-shadow : 0px  10px  10px -10px  #333 ;
        width: 90%;
        margin-left: 5%;
        margin-top: 25px;
        height: 200px;
        overflow-y:auto;
        position: relative;
        
    }
    /* 隱藏滾動條 */
        .select_skill::-webkit-scrollbar {
    display: none;
    }

    /* 美化滾動條（展示示例） */
    .select_skill::-webkit-scrollbar {
    width: 8px;
    height: 8px;
    }

    .select_skill::-webkit-scrollbar-thumb {
    background-color: #666;
    border-radius: 10px;
    }

    .select_skill::-webkit-scrollbar-thumb:hover {
    background-color: #555;
    }

    .select_skill::-webkit-scrollbar-track {
    background-color: #f1f1f1;
    }

    .yes_skill,.yes_certificate{
        margin-left: 20px;
        background-color:  rgba(185, 241, 185, 0.5);
        color: green;
        height: 50px;
        cursor: pointer;
        padding: 10px;
        border-radius: 14px;
        display: inline-block;
        margin-bottom: 10px;
        transition: 1s;
    }
    .no_skill,.no_certificate{
        cursor: pointer;
        margin-left: 20px;
        display: inline-block;
        margin-bottom: 10px;
        height: 50px;
        padding: 10px;
        background-color: rgba(239, 146, 146, 0.5);
        border-radius: 15px;
        color: red;
        transition: 1s;
    }
    .no_skill:hover,.null_skill:hover,.no_certificate:hover{
        background-color:  rgba(185, 241, 185, 0.5);
        color: green;
    }
    .null_skill{
        cursor: pointer;
        margin-left: 20px;
        display: inline-block;
        margin-bottom: 10px;
        height: 50px;
        padding: 10px;
        background-color: rgba(121, 164, 204, 0.295);
        border-radius: 15px;
        color: rgb(114, 112, 112);
        transition: 1s;
    }
    .empty_certificate{
        margin-left: 20px;
        display: inline-block;
        cursor: pointer;
        margin-bottom: 10px;
        height: 50px;
        padding: 10px;
        background-color: rgba(214, 210, 210, 0.5);
        border-radius: 15px;
        color: rgb(56, 55, 55);
        transition: 1s;
    }
    @media only screen and (max-width:768px) {
        .divin{
        background-color: rgb(177, 192, 192);
        margin-top:15px;
        justify-content: center;
        height: 200px;
        border-radius: 5px;
    }
    div h3{
          margin-left: 0px !important;
        }

    }
    .image_box{
        flex-wrap:wrap; width:100%;

    }
    #chose_job{
        margin-top:30px;
        margin-left: 8%;
        text-align: left;
    }
    #chose_job a{
        text-align: left;
        padding: 15px;
        width: 100px;
        color: black;
        height: 200px;
        margin-right: 2%;
        background-color: aliceblue;
        border-radius: 5px 5px 0px 0px;
        margin-top: -30px;
    }
    #chose_job hr{
        width: 95%;
    }
    .job_skill{
        display: block;
    }
    ul.nav{
        position: relative;
        margin-top: 30px;
        width: 87% !important;
        margin-left: 6% !important;
        margin-bottom: 1px;
        /* transform: translate(-8%,-92%); */
    }
    ul.nav li{
        width: 10%;
        min-width:100px ;
    }
    .noactive{
        background-color: rgb(192, 190, 188) !important;
    }
    .text-ri{
        top: 3px;
        position: absolute !important;
        left: 99%;
        z-index: 3 !important;
        transform:translate(-98%,-2%);
        background-color: rgba(255, 255, 255, 0);
    }
    .cover{
                visibility: hidden;
                transition: 1s;
                position:absolute;
                top: 0;
                left: 0;
                background-color: rgb(42, 38, 38);
                opacity: 0;
                height:100%;
                width: 100%;
                z-index: 5;
        }


        /* @media screen and(max-width:766px) {
      div h3{
          text-align: center;
        }
        .divin{
          background-color:black !important ;
        }

    } */
    @media screen and (max-width:768px) {
        .job_div{
            margin-left: 10px;
            width: 96%;
        }
        .select_skill{
            margin-left: 10px;
            width: 96%;
        }
        .divjob{
            padding: 10px;
        }
        .inner_left{
            margin-left:-93px ;
            margin-top: 15px;
        }
        .h4_title{
            margin-top: 6px;
            height: 70px;
        }
        ul.nav{
        margin-left: 2% !important;
        width: 96% !important;
        }


    }
    @media screen  and (min-width:600px){
        #skill2{
        margin-right:1%;
        margin-left:2.2%;
    }
    #skill3{
        margin-left:1%;
        margin-right:2.2%;
    }
}
    @media screen and (max-width:600px) {
        nav.nav{
            margin-left: 0% !important;
        }
        .text-ri{
            top:-50px;
            margin-top: 10px !important;
        }
        .select_skill{
            margin-bottom: 50px;
        }
        .divin{

        height: 300px;
        }
        #skill2{
        margin-right:0%;
        margin-left:0%;
        margin-top: 2%;
        margin-bottom: 2%;
        }
        #skill3{
            margin-left:0%;
            margin-bottom: 2%;
        }

    }
    #img1111,#img104{
        padding: 15px;
    }
    .but_open{
            display: none;
    }
    #last_page{
      display: none;
    }
    #select_box3{
          opacity: 0;
        background-color: rgb(255, 255, 255);
        transition: 1s;
        position: absolute;
        top:50%;
        left: 50%;
        transform: translate(-50%,-50%);
        z-index: 6;
        border-radius: 5px;
        color: #000;
        padding: 5px;
        overflow-x: hidden;
        visibility: hidden;
        text-align: left;
        width: 500px;
        height: auto !important;
    }
    @media screen and (max-width:560px) {
        .inner_left{
            margin-left: 10px;
        }
        .y{
            display: none;
        }
        .total_search{
            display: block !important;
        }
        .divjob{
            width: auto !important;
            margin-right: 20px;
        }
        .job_name{
            height: auto;
        }
        .h4_title{
            text-align: center;
            height: auto;
        }
        .job_skill{
            display: none;
            padding-left: 3%;
            margin-bottom: -100px;
        }

        #img1111,#img104{
            padding: 0px;
            margin-right: 40px;
        }
        .but_open{
            display: block;
            background-color: rgba(250, 235, 215, 0);
            border: 3px solid rgb(165, 160, 146);
            margin-left: 12px;
            width: 90px;
            border-radius: 5px;
            padding: 5px;
        }
        .number_img{
            height: 90px;
        }
        .but_open:hover{
            background-color: rgba(250, 235, 215, 1);
        }
        .text-ri{
            position: relative;
        }
    }
    @media screen and (max-width:500px) {
        #select_box3{
            width: 100%;
        }
    }
    @media screen and (min-width:561px){
        .job_skill{
            display: block !important;
        }
    }
    .salary{
        background-color:rgb(240, 240, 216,0.7); padding: 10px;border-radius: 20px;
    }
    .inner_county{
      display: inline-block;
      width: 30%;
      margin-top: 10px;
      padding-top: 5px;
      padding-left: 40px;
      padding-bottom: 5px;
      border-radius: 10px;
      color: #000;
      cursor: pointer;
    }
    @media screen and (max-width:451px){
        ul.nav li{
            min-width: 80px;
        }
        .salary{
            padding-top: 0px;
            background-color:rgba(250, 250, 250, 0);
        }
    }
    @media screen and (max-width:432px) {
        .inner_county{
            width: 90px;
            padding-left: 20px;
        }
    }
    #select_box,#select_box2,#select_box_sort {
        opacity: 0;
        background-color: rgba(208, 222, 235, 0.842);
        transition: 1s;
        position: absolute;
        top:50%;
        left: 50%;
        transform: translate(-50%,-50%);
        z-index: 6;
        border-radius: 5px;
        color: #000;
        padding: 5px;
        overflow-x: hidden;
        visibility: hidden;
        max-width: 503px;
        min-width: 200px;
    }
    #select_box h5,#select_box2 h5,#select_box_sort h5{
        color: aliceblue;
        font-weight: bolder;
        font-size: 25px;
    }
    .select_box_title{
        position: relative;
        background-color: rgba(59, 203, 216, 0.658);
        border-radius: 5px;
        text-align: left;
        padding: 10px;
    }
    .select_no{
        position: absolute;
        top: 15.5px;
        left: 98%;
        transform: translate(-98%,-2%);
        color: black;
    }
    .box_date{
        padding-top: 10px !important;
        padding-bottom: 10px;
    }
    .box_date2{
        padding: 5px;
    }
    .box_Education{
        padding-top: 15px !important;
        padding-bottom: 15px;
        background-color: rgb(190, 185, 185);
    }
    .box_experience{
        padding: 15px 0px 15px 0px;
    }
    .form-check{
        margin-left: 10px;
    }
    .line-clamp-content{
        line-height: 50px !important;
    }
    .line-clamp-content2{
        line-height: 50px !important;
    }
    .line-clamp-content3{
        line-height: 50px !important;
    }
    #company_submit{
        color:  black;
    }
    #trend_submit{
        background-color: rgb(155, 153, 153) !important;
        color:  black;
    }
    #trend_submit:hover,#company_submit:hover,#popular_job:hover{
        color:  rgb(253, 245, 245) !important;
        box-shadow: 1px 1px 3px rgb(214, 211, 211);
    }
    #condition{
        margin-left: auto;
        margin-right: auto;
        margin-top: 30px;
        text-align: left;
        width: 84%;
    }
    #condition span{
        padding: 12px;
        border-radius: 10px;
        font-weight: bold;
        background-color: #4c97b07c;
        display: none;
        margin-right: 10px;
        transition: 2s;
    }
    #condition span img{
        margin-left:5px;
        vertical-align: -4px;
    }
    #user-recommend{
        height:50px;
        margin-top: 10px;
        position: relative;
        margin-left: 20px;
    }
    #user-recommend span{
        position: absolute;
        right: 10px;
        bottom: -10px;
        border-radius: 5px;
        padding: 8px 8px;
    }

    @keyframes example {
    0%   {transform:rotate(0deg);color: rgb(4, 66, 4);}
    25%   {transform:rotate(30deg);}
    50%  {transform:rotate(0deg);color: white;}
    75%  {transform:rotate(-30deg);}
    100% {transform:rotate(0deg);color: rgb(109, 28, 45);}
    }
    @keyframes myfirst {
        0%   {opacity: 1;transform: translate(0px, 0px);}
        100% {opacity: 0.25;transform: translate(-5px, 5px);}
    }
    .user-good:hover{
    animation-name: example;
    animation-duration: 3s;
    animation-iteration-count: infinite;
    }
    .user-nogood:hover{
    animation-name: myfirst;
    animation-duration: 2s;
    animation-iteration-count: infinite;
    }
    .user-nogood{
        color: rgb(120, 176, 202);
        vertical-align: -5px !important ;
    }
    .user-good{
        vertical-align: -5px;
        color: rgba(51, 51, 51, 0.638);
    }
    .noactive3{
        background-color: rgba(145, 77, 77, 0.49) !important;
        color: rgb(0, 0, 0) !important;
    }
    .close_content{
        color:#403434;
        border-radius: 3px;
        font-weight:550;
    }
    .open_content{
        color: rgb(255, 255, 255);
        font-weight:550;
        border-radius: 3px;
    }
    @media screen and (max-width:385px){
        #user-recommend span{
        left: -20px;
    }
    #user-recommend{
        margin-bottom: 45px;
    }
    .job_skill{
        padding-top: 0px;
        margin-top: -50px;
    }
    }
    #skill2{
        text-align: left;
        padding-left: 15px;
        color:rgb(95, 91, 91) ;
    }    .tw_county{
      color: cornflowerblue;
      padding:20px 20px;
      padding-bottom: 20px;
      padding-top: 00px;
    } 
    .cover{
      visibility: hidden;
                transition: 1s;
                position:absolute;
                top: 0;
                left: 0;
                background-color: rgb(42, 38, 38);
                opacity: 0;
                height:100%;
                width: 100%;
                z-index: 5;
        }
        #out_select_local{
        position: absolute;
        top: 20.5px;
        left: 96%;
        transform: translate(-98%,-2%);
        color: black;
    }
    #lo_screen{
      background-color: #dfd7d7c0;padding:10px 20px 10px 30px;margin: -10px -12px;
      overflow-y: hidden;
      position:  relative !important;
    }
    #local_champ{
      position: absolute;
      top: 68px;
      left: 89%;
      padding-left: 30px;
      display: none;
    }
    #local_open{
      position: absolute;
      display: none;
      left: 88%;
      padding-left: 30px;
      bottom: 17px;
    }
    html{
        overflow-x:hidden !important;
        width: 100% !important;
    }
    button#update_recommend{
        position: fixed; left: 0px; background-color: #d8915a;border: none;
        border-radius: 5px; padding: 5px 10px; 
        text-transform: uppercase; box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.3);
        transition: background-color 0.3s, transform 0.2s; cursor: pointer;
        width: 60px;
        max-width: 80px;
        min-width: 20px;
        z-index: 5;
    }
    .sorted{
        margin: 10px 0px 10px 20px!important;
    }
    .certificate_button{
        padding: 10px 20px; background-color: #3498db; color: #fff; border: none; border-radius: 5px; box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.2); cursor: pointer;
        position:absolute;
        top: 18px;
        right: 40px;  
    }


</style>
{% extends 'search_job/base.html'%}
{%block main2%}
<form id="job_send" method="GET" action="/myApp/search_job_skill/" >
{% if skill_hot != '' %}
<input hidden name="skill_hot" value="{{skill_hot}}" id="skill_hot">
{% endif %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/hint.css' %}" type="text/css">

{% csrf_token %}
<div class="divin flex">
    <div class="diviner flex" id="search_title" >
        <input type="search" id="skill1" value="{{get_skill}}" name="get_skill"  class="get_skill"  placeholder="請輸入需要篩選的技能(用、或,隔開)..." >
        <input name="get_local" id="get_local_submit" value=""  hidden>
        <button type="button" id="skill2" value='{{get_local | safe}}'>篩選地點</button>
        <select id="skill3" name="job">
            {% for i,v in dict_jobname.items %}
            <optgroup label="{{i}}" style="padding: 20px;" >
                {% for z in v %}
                    {% if z == type_skill %}
                    <option value="{{z}}" class="opin" selected>{{z}}</option>
                    {% else %}
                        <option value="{{z}}" class="opin">{{z}}</option>
                    {% endif %}
                {% endfor %}
            </optgroup>
            {% endfor %}
        </select>
        <button class="btn btn-secondary dropdown-toggle" id="special_search"  type="button" id="dropdownMenuButton1"  data-bs-toggle="dropdown" aria-expanded="false">
            特殊篩選
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="width:40px !important;">
            <li><a id="select_date" class="dropdown-item"  style="width:160px !important;">日期、學歷、經驗...</a></li>
            <li><a id="select_sort" class="dropdown-item" style="width:160px !important;">排序</a></li>
            <li><a id="select_keyword" class="dropdown-item" style="width:160px !important;">關鍵字篩選</a></li>
        </ul>
    </div>
    <button  type="submit" id="sub" value="1 no" name="page"  >
        &nbsp;
        <img src="../../static/images/search.png" height="20px" width="20px" style="margin-bottom: 2px;">
      &nbsp;
    </button>

</div>

<div id="condition">
    <span id="condition_0"></span>
    <span id="condition_1"></span>
    <span id="condition_2"></span>
    <span id="condition_3"></span>
    <span id="condition_4"></span>
    <span id="condition_5"></span>
    <span id="condition_6"></span>
    <span id="condition_7"></span>
</div>
<button type="button"  id="update_recommend">
    <img src="../../static/images/copy.png" width="42" height="42">
</button>
  <div class="cover"></div>
  <div id="select_box2" style="width: 300px;">
    <h5 class="select_box_title">關鍵字搜尋
        <svg xmlns="http://www.w3.org/2000/svg" class="select_no" width="16" height="16" fill="currentColor" id="out_select2" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
        </svg>
    </h5>
    
    <fieldset class="row mb-3" style="padding-left: 5px;padding-right: 5px;">
        <div class="flex box_date2" style="flex-wrap:wrap">
            <label class="text-secondary mb-2" style="margin-bottom: 70px;" for="form1">關鍵字查詢:
                <span class="hint--right" data-hint="關鍵字請用、或,隔開來">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-question-circle " viewBox="0 0 16 16" >
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                      </svg>
                   </span>

            </label><input id="search_input" name="search_keyword" value="{{search_keyword}}" type="search" placeholder="如有多個關鍵字請用,或、區隔"  class="form-control" />
        </div>
    </fieldset>
    <button type="button" class="btn btn-primary" id="story2">提交</button>
    <button type="button" id="reset2" class="btn btn-primary" style="background-color:rgba(255, 0, 0, 0.442) ;">清除</button>
  </div>

  <input hidden name="extends_local" value="{{extends_local}}">
  <input hidden name="extends_type" value="{{extends_type}}">



  <div id="select_box">
    <h5 class="select_box_title">進階篩選
        <svg xmlns="http://www.w3.org/2000/svg"  width="16" height="16" fill="currentColor" id="out_select" class="bi bi-x-lg select_no" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
          </svg>
    </h5>
  <fieldset class="row">
    <div class="flex box_date" style="flex-wrap:wrap">
        <legend class="col-form-label col-sm-2 pt-0" style="width:60px ;"><strong>日期:</strong></legend>
        <div class="form-check ">
            <input class="form-check-input date" type="radio" name="date" id="date0" value="" checked>
            <label class="form-check-label" for="date0">
            不拘
            </label>
            </div>
        <div class="form-check ">
            <input class="form-check-input date" type="radio" name="date" id="date1" value="1">
            <label class="form-check-label" for="date1">
            當天、昨天
            </label>
        </div>
        <div class="form-check ">
            <input class="form-check-input date" type="radio" name="date" id="date3" value="3">
            <label class="form-check-label" for="date3">
            三天前
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input date" type="radio" name="date" id="date7" value="7">
            <label class="form-check-label" for="date7">
            一周
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input date" type="radio" name="date" id="date14" value="14">
            <label class="form-check-label" for="date14">
            兩周
            </label>
        </div>
    </div>
    <div class="flex box_Education" style="flex-wrap:wrap">
        <legend class="col-form-label col-sm-2 pt-0" style="width:60px ;"><strong>學歷:</strong></legend>
        <div class="form-check ">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_none" value="" checked>
            <label class="form-check-label" for="Education_none">
            不拘
            </label>
            </div>
        <div class="form-check ">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_sec" value="secondary">
            <label class="form-check-label" for="Education_sec">
                國中以下
            </label>
        </div>
        <div class="form-check ">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_hei" value="highschool">
            <label class="form-check-label" for="Education_hei">
            高中/高職
            </label>
        </div>
        <div class="form-check ">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_spe" value="Specialist">
            <label class="form-check-label" for="Education_spe">
            專科
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_uni" value="University">
            <label class="form-check-label" for="Education_uni">
            大學
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_mas" value="master">
            <label class="form-check-label" for="Education_mas">
            碩士
            </label>
        </div>
        <div class="form-check">
            <input class="form-check-input Education" type="radio" name="Education" id="Education_phd" value="phd">
            <label class="form-check-label" for="Education_phd">
            博士
            </label>
        </div>
    </div>
    <div class="flex box_experience" style="flex-wrap:wrap">
        <legend class="col-form-label col-sm-2 pt-0" style="width:60px ;"><strong>經驗:</strong></legend>
        <div class="form-check ">
            <input class="form-check-input experience" type="radio" name="experience" id="experience_none" value="" checked>
            <label class="form-check-label" for="experience_none">
            不拘
            </label>
            </div>
        <div class="form-check ">
            <input class="form-check-input experience" type="radio" name="experience" id="experience_no" value="noexper">
            <label class="form-check-label" for="experience_no">
            無經驗
            </label>
        </div>
        <div class="form-check ">
            <input class="form-check-input experience" type="radio" name="experience" id="experience_cus" value="Customize" >
            <label class="form-check-label" for="experience_cus">
                幾年以下
            </label>
            <input type="number" min="1" max="20" name="Customize" value="{{Customize}}" style="height:20px ;" id="year_job_experience" disabled >
        </div>
    </div>
    <div class="flex box_Education" style="flex-wrap:wrap">
        <legend class="col-form-label col-sm-2 pt-0" style="width:60px;"><strong>薪水:</strong></legend>
        <div class="form-check user_salary">
            <input class="form-check-input" type="radio" name="salary" id="salary_none" value="" checked>
            <label class="form-check-label" for="salary_none">
                不拘
            </label>
        </div>
        <div class="form-check user_salary">
            <input class="form-check-input" type="radio" name="salary" id="salary_change" value="change_salary" >
                月薪
            <input type="number" min="1" name="Customize_salary" value="{{salary_select}}" style="height:20px; width: 100px;" id="user_ch_salary" disabled >
            <label class="form-check-label" for="salary_change">
                元以上
            </label>
        </div>
    </div>
    <div class="flex box_experience" style="flex-wrap:wrap">
        <legend class="col-form-label col-sm-2 pt-0" style="width:60px;"><strong>證照:</strong></legend>
        <div class="form-check user_certific">
            <input class="form-check-input" type="radio" name="certificate_select" id="certificate_none" value="" checked>
            <label class="form-check-label" for="certificate_none">
                不拘
            </label>
        </div>
        <div class="form-check user_certific">
            <input class="form-check-input" type="radio" name="certificate_select" id="certificate_no" value="certificate_no" >
            <label class="form-check-label" for="certificate_no">
                無須證照
            </label>
        </div>
    </div>
  </fieldset>
  <div>
    <button type="button" class="btn btn-primary" id="story">提交</button>
    <button type="button" id="reset" class="btn btn-primary" style="background-color:rgba(255, 0, 0, 0.442) ;">清除</button>
    </div>
</div>

<div id="select_box_sort">
    <h5 class="select_box_title" style="padding: 15px 15px" >【排序】
        <svg xmlns="http://www.w3.org/2000/svg"  width="16" height="16" fill="currentColor" id="out_select_sort" class="bi bi-x-lg select_no" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
          </svg>
    </h5>
    <hr style="margin: 10px 0px !important;">

    <fieldset class="row mb-3" style="padding-left: 5px;padding-right: 5px; text-align: left;">
        <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="no_sort" name="sorted" value=""  checked style="margin-right: 5px;" >
            <label for="no_sort" class="form-check-label" style="margin-right: 15px;">無排序</label>
        </div>
        <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="date_low_max" name="sorted" style="margin-right: 5px;" value="date_max">
            <label for="date_low_max" class="form-check-label" style="margin-right: 15px;">更新日期 : 新→舊</label>
        </div>
        <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="exper_low_max" name="sorted" style="margin-right: 5px;" value="experience_max">
            <label for="exper_low_max" class="form-check-label" style="margin-right: 15px;">經歷 : 多→少</label>
        </div>
        <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="exper_max_low" name="sorted" style="margin-right: 5px;" value="experience_low">
            <label for="exper_max_low" class="form-check-label" style="margin-right: 15px;">經歷 : 少→多</label>
        </div>
        <!-- <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="certificate_max" name="sorted" style="margin-right: 5px;" value="certificate_suitable">
            <label for="certificate_max" class="form-check-label" style="margin-right: 15px;">證照符合 : 多→少</label>
        </div> -->
        <div class="form-check sorted">
            <input type="radio" class="form-check-input" id="salary_max" name="sorted" style="margin-right: 5px;" value="salary_suitable">
            <label for="salary_max" class="form-check-label" style="margin-right: 15px;">薪水 : 多→少</label>
        </div>
    </fieldset>
    <div>
        <button type="button" class="btn btn-primary" id="story_sort">提交</button>
        <button type="button" id="reset_sort" class="btn btn-primary" style="background-color:rgba(255, 0, 0, 0.442) ;">清除</button>
    </div>
</div> 

        <div id="select_box3">
          <p style="font-size: 20px;text-align: center;padding-top: 10px;padding-bottom: 10px;">地區選單
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" id="out_select_local" class="bi bi-x-lg" viewBox="0 0 16 16">
              <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
          </svg>
        </p>
        <div id="lo_screen"><strong>以選地區</strong><span id="local_champ" onclick="open_local_title()"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
            <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"/>
          </svg></span>
            <span id="local_area"></span><span id="local_open" onclick="close_local_title()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-up-fill" viewBox="0 0 16 16">
                <path d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"/>
              </svg>
            </span>
          </div>
          <div style="height: 300px; overflow-y:scroll; margin-top: 20px;" id="total_counny">
            <p class="tw_county">北部<br>
              <span class="inner_county" id="Taipei">台北市</span>
              <span class="inner_county"  id="NewTaipeiCity">新北市</span>
              <span class="inner_county" id="Keelung">基隆市</span>
              <span class="inner_county" id="Taoyuan">桃園市</span>
              <span class="inner_county" id="Hsinchui">新竹市</span>
              <span class="inner_county" id="Hsinchuc">新竹縣</span>
              <span class="inner_county" id="Miaoli">苗栗縣</span>
            </p>
            <p class="tw_county">中部<br>
              <span class="inner_county" id="Taichung">台中市</span>
              <span class="inner_county" id="Nantou">南投縣</span>
              <span class="inner_county" id="Changhua">彰化縣</span>
              <span class="inner_county" id="Yunlin">雲林縣</span>
            </p>
            <p class="tw_county">南部<br>
              <span class="inner_county" id="Chiayic">嘉義市</span>
              <span class="inner_county" id="Chiayii">嘉義縣</span>
              <span class="inner_county" id="Tainan">台南市</span>
              <span class="inner_county" id="Kaohsiung">高雄市</span>
              <span class="inner_county" id="Pingtung">屏東縣</span>
            </p>
            <p class="tw_county">東部<br>
              <span class="inner_county" id="Yilan">宜蘭縣</span>
              <span class="inner_county" id="Hualien">花蓮縣</span>
              <span class="inner_county" id="Taitung">台東縣</span>
            </p>
            <p class="tw_county">離島<br>
              <span class="inner_county" id="Penghu">澎湖縣</span>
              <span class="inner_county" id="golden">金門縣</span>
              <span class="inner_county" id="Lianjiang">連江縣</span>
            </p>
          </div>
          {% for i in local %}
            <div id="inner_{{i.id}}" style="height: 300px; overflow-y:scroll; margin-top: 20px;margin-bottom: 20px;display: none;">
                <span class="inner_county_local">
                    <input type="checkbox"  onclick="add_local_total(this)"  id="total_{{i.id}}" value="{{i.name}}" class="total_{{i.id}}">
                    <label for="total_{{i.id}}">{{i.name}}</label><br>
                  </span><br>
              {% for z in i.data %}
              <span class="inner_county_local">
                <input type="checkbox" id="{{i.id}}{{ forloop.counter }}" value="{{z}}" class="input_{{i.id}}">
                <label for="{{i.id}}{{ forloop.counter }}">{{z}}</label>
              </span>
              {% endfor %}
            </div>
          {% endfor %}
            <div style="text-align: center;">
              <button type="button" class="btn btn-outline-primary" id="last_page">上一層</button>
              <button type="button" class="btn btn-outline-danger" id="remove_local">清除</button>
              <button type="button" class="btn btn-outline-info" id="ok_local">確認</button>
              <button type="button" class="btn btn-outline-info" id="ok_local_inner">確認</button>
            </div>
        </div>
        {% if dict_number|length != 0 %}

        {% if dict_skill|length != 0 %}
            <div class="select_skill">
                <h5 style="color: #333;width: 100%; text-align: left;font-weight: bold;margin: -10px 0px 30px 20px;display: flex;">工作技能</h5>
                <button class="certificate_button" id="skill_delete" type="button">全部清空</button>
                {% if get_skill != '' %}
                    {% for sele_skill,yes_no in dict_skill.items %}
                        {% if yes_no == 'yes'%}
                            <span class="yes_skill" onclick="skill_click(this)" id="{{sele_skill|lower}}" >{{sele_skill}}</span>
                        {% else %}
                            <span class="no_skill" onclick="skill_click(this)" id="{{sele_skill|lower}}">{{sele_skill}}</span>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    {% for sele_skill,yes_no in dict_skill.items %}
                        <span class="null_skill" onclick="skill_click(this)" id="{{sele_skill|lower}}">{{sele_skill}}</span>
                    {% endfor %}
                {% endif %}
            </div>
        {% endif %}
        {% if certificate_user|length != 0 or job_certificate|length != 0 %}
            <div class="select_skill">
                    <h5 style="color: #333;width: 100%; text-align: left;font-weight: bold;margin: -10px 0px 30px 20px;;">證照要求</h5>
                    <button class="certificate_button" id="certificate_delete" type="button">全部清空</button>
                {% if certificate_user|length == 0 %}
                    {% for cer in job_certificate %}
                        <span class="empty_certificate" onclick="certificate_click(this)" id="{{cer}}" >{{cer}}</span>
                    {% endfor %}
                {% else %}
                    {%for cer in certificate_user %}
                        <span class="yes_certificate" onclick="certificate_click(this)" id="{{cer}}" >{{cer}}</span>
                    {% endfor %}
                    {% for cer in job_certificate %}
                        <span class="no_certificate" onclick="certificate_click(this)" id="{{cer}}" >{{cer}}</span>
                    {% endfor %}
                {% endif %}
            </div>
        {% endif %}

        <input name="certificate_user"  type="text" style="display: none;">
        <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" >找工作</a>
            </li>
            <li class="nav-ite">
                <a class="nav-link noactive" id="company_submit" >找公司</a>
            </li>
            <li class="nav-ite">
                <a class="nav-link noactive" id="trend_submit">統計趨勢</a>
            </li>
            <li class="nav-ite">
                <a class="nav-link noactive3" id="popular_job" >推薦工作</a>
            </li>
            <!-- <div class="dropdown text-ri">
                <button class="btn btn-secondary dropdown-toggle" id="special_search"   type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                    特殊篩選
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="width:20px !important;">
                    <li><a id="select_date" class="dropdown-item"  style="width:160px !important;">日期、學歷、經驗...</a></li>
                    <li><a id="select_sort" class="dropdown-item" style="width:160px !important;">排序</a></li>
                    <li><a id="select_keyword" class="dropdown-item" style="width:160px !important;">關鍵字篩選</a></li>
                </ul>
            </div> -->
        </ul>
        <div class="job_div">
            {% for i,n in dict_number.items %}
            <div id="total_job">
                <div class="flex total_search">
                    {% if i.website == "1111" %}
                        <div id="img1111">
                            {% load static %}
                            <img  alt="1111" style="width:70px;" height="70px" src="{% static 'images/1111.png' %}">
                        </div>
                    {% else %}
                        <div id="img104">
                            {% load static %}
                            <img alt="1111" style="width:70px;" height="70px" src="{% static 'images/104.png' %}">
                        </div>
                    {% endif %}
                        <div  class="divjob"style="text-align:left; width:59%;word-break:break-all;word-wrap:break-word;">
                            <span id="job_name" class="relative">
                                <div class="h4_title"><h4><a class="title" href="{{i.href}}" target="_blank">{{i.title |safe }}</a></h4></div>
                                <p hidden class="jobid">{{i.jobid}}</p>
                                <button type="button" onclick="love('{{ forloop.counter }}')" class="love">
                            {% for z in n.values %}
                            {% if z.love == "no" %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart love1" viewBox="0 0 16 16" id="love1" >
                                    <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart-fill love2" viewBox="0 0 16 16" id="love2">
                                    <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                </svg>
                            {% else %}
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart love1" viewBox="0 0 16 16" id="love1yes" >
                                    <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"/>
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-heart-fill love2" viewBox="0 0 16 16" id="love2yes">
                                    <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314z"/>
                                </svg>
                            {% endif %}
                            </button>
                        </span>
                        {% endfor %}
                        <div class='inner_left'>
                            <h5  class="font_bold job_local " >{{i.local}}</h5>
                            <p  class="font_bold " style="padding-top:5px;">{{i.company}}</p>
                            <div style="margin-bottom: 30px;" class="job_line_he30">
                                <p class="line-clamp-content"  >
                                    {{i.content |safe }}
                                </p>
                                <p onclick="open_line('{{forloop.counter}}')" style="text-align:right ;margin-top: -20px;" class="line-clamp-open" ></p>
                            </div>
                            <!-- <div>
                                <b>工作類型:</b>
                                <span>
                                    {{i.Additional_conditions}}
                                </span>
                            </div> -->
                            <span class="font_bold salary" >
                                {{i.salary}}
                            </span>
                            {% for z in n.values %}
                            <div id="user-recommend">
                                <span id="span-recommend"  >
                                    {% if z.recommend == "yes" %}
                                    <span >
                                        <svg  id="{{i.jobid}}" style="float: left;"  onclick="user_good('{{i.jobid}}','{{z.count}}')" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-hand-thumbs-up-fill user-nogood " viewBox="0 0 16 16">
                                            <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
                                        </svg>
                                            {% if z.count == 0 %}
                                                <p style="white-space:nowrap">目前尚未有人推薦此工作</p>
                                            {% else %}
                                                <p style="white-space:nowrap">已有{{z.count}}人覺得這份工作好</p>
                                            {%endif%}
                                    </span>
                                    {% else %}
                                    <span>
                                        <svg id="{{i.jobid}}" style="float: left;" onclick="user_good('{{i.jobid}}','{{z.count}}')" xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-hand-thumbs-up-fill user-good" viewBox="0 0 16 16">
                                            <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"/>
                                        </svg>
                                        {% if z.count == 0 %}
                                            <p style="white-space:nowrap">目前尚未有人推薦此工作</p>
                                        {% else %}
                                            <p style="white-space:nowrap">已有{{z.count}}人覺得這份工作好</p>
                                        {%endif%}
                                    </span>

                                    {% endif %}

                                </span>
                            </div>
                            {% endfor %}

                        </div>
                    </div>
                    <hr class="y">
                    <div  class="divjob relative job_skill" style="width:40%;text-align: left;">
                        <div class="font_bold flex image_box">
                            所需技能:
                                {% if get_skill != "" %}
                                    {% load new_tage %}
                                    {% for getskill in i.skill|split:"、" %}
                                        {% if getskill|lower in get_skill|lower|split:"、" %}
                                            <span style="color:green;" class="skillgreen">{{getskill|title}}  &nbsp</span>
                                        {% elif getskill == "無" or getskill == "不拘"  %}
                                            <span class="skillno">不拘</span>
                                        {% else%}
                                            <span style="color:red;" onclick="addinput(this)" class="skillred">{{getskill|title}}  &nbsp</span>
                                        {% endif %}
                                    {% endfor %}
                                {% else %}
                                     {% load new_tage %}
                                        {% for getskill in i.skill|split:"、" %}
                                            {% if getskill == "無" or getskill == "不拘"  %}
                                                <span class="skillno">不拘</span>
                                            {% else %}
                                                <span style="color:rgb(86, 123, 133);" onclick="addinput(this)" class="skillgrey">{{getskill|title}}  &nbsp</span>
                                            {% endif %}
                                        {% endfor %}
                                {% endif %}
                        </div>
                        <p>發布日期:{{i.date}}</p>
                        {% if i.certificate != '不拘'%}
                        <div class="font_bold flex image_box">
                            證照要求:
                            {% if certificate_user != '' %}
                                {% load new_tage %}
                                {% for certificate in i.certificate|upper|split:"、" %}
                                    {% if certificate in certificate_user %}
                                        <span  style="color: green;" class="skillgreen">{{certificate}}  &nbsp</span>
                                    {% else %}
                                        <span  style="color:red" class="skillred">{{certificate}}  &nbsp</span>
                                    {% endif %}
                                {% endfor %}
                            {% else %}
                                {% load new_tage %}
                                {% for certificate in i.certificate|upper|split:"、" %}
                                    <span  style="color:rgb(86, 123, 133);" class="skillgrey">{{certificate}}  &nbsp</span>
                                {% endfor %}
                            {% endif %} 
                        </div>
                        {% endif %}
                        <p>經驗:{{i.experience}}</p>
                        <p>學歷:{{i.Education}}</p>
                        <p>語言:{{i.language}}</p>
                        <div  class="job_line_he302">
                            <p class="line-clamp-content2"  >
                                附加條件:{{i.Additional_conditions |safe}}
                            </p>
                            <p onclick="open_line2('{{forloop.counter}}')" style="text-align:right ;margin-top: -20px;" class="line-clamp-open2" ></p>
                        </div>
                        {% if i.other != "不拘"%}
                        <div  class="job_line_he303" style="background-color: #cadeee75;padding: 10px;border-radius: 10px;word-break:break-all;word-wrap:break-word;">
                            <p class="line-clamp-content3"  >
                                其它:{{i.other}}
                            </p>
                            <p onclick="open_line3('{{forloop.counter}}')" style="text-align:right ;margin-top: -20px;" class="line-clamp-open3" ></p>
                        </div>
                        {% else %}
                        <div  class="job_line_he303" style="background-color: #cadeee75;padding: 10px;border-radius: 10px;display: none;">
                            <p class="line-clamp-content3"  >
                            </p>
                            <p onclick="open_line3('{{forloop.counter}}')" style="text-align:right ;margin-top: -20px;" class="line-clamp-open3" ></p>
                        </div>
                        {% endif %}
                        <div class="number_img">
                        </div>
                    </div>
                    <div class="position-relative " style="margin-top: -55px;margin-bottom: 30px;">
                        <button class="but_open" type="button" onclick="but_total('{{forloop.counter}}')">顯示全部</button>
                    </div>
                </div>

                <hr style="border-top:3px dashed #1c5a89;" width="98%">
            </div>
        {% endfor %}
        </div>
        






    <div style="margin: 20px; ">
        <span class="pagediv font-bold">
            {% if page != 1 %}
            <button type="submit"  style="border:none; background-color:rgba(220,38,38,0);" value="{{page}} last" name="page" onclick="page(2)">上一頁
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                </svg>
            </button>
            {% endif %}
            <select style="width:auto;" name="select"  onchange="submit()" >
                {% load new_tage %}
                {% for i in maxpage|range %}
                    {% if i != page %}
                        <option class="text-al" value="{{i}} no">第 {{i}} / {{maxpage}}頁</option>
                    {% else %}
                        <option selected class="text-al" value="{{i}} no">第 {{page}} / {{maxpage}}頁</option>
                    {% endif %}
                {% endfor %}
                {% if page == maxpage %}
                    <option class="text-al" selected value="{{maxpage}} no">第 {{maxpage}} / {{maxpage}}頁</option>
                {% else %}
                <option class="text-al" value="{{maxpage}} no">第 {{maxpage}} / {{maxpage}}頁</option>
                {% endif %}
                </select>
            {% if page != maxpage %}
                <button class=""type="submit" style="border:none; background-color:rgba(220,38,38,0);" value="{{page}} next" name="page"  onclick="page(3)">下一頁
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                </svg></button>
            {% endif %}
        </span>
    </div>
    {% else %}
    <ul class="nav nav-tabs">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page">找工作</a>
        </li>
        <li class="nav-ite">
            <a class="nav-link noactive" id="company_submit" >找公司</a>
        </li>
        <li class="nav-ite">
            <a class="nav-link noactive" id="trend_submit">統計趨勢</a>
        </li>
        <li class="nav-ite">
            <a class="nav-link noactive3" id="popular_job" >推薦工作</a>
        </li>
        <div class="dropdown text-ri">
            <button class="btn btn-secondary dropdown-toggle" id="special_search"   type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                特殊篩選
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" style="width:20px !important;">
                <li><a id="select_date" class="dropdown-item"  style="width:160px !important;">日期、學歷、經驗</a></li>
                <li><a id="select_sort" class="dropdown-item" style="width:160px !important;">排序</a></li>
                <li><a id="select_keyword" class="dropdown-item" style="width:160px !important;">關鍵字篩選</a></li>
            </ul>
        </div>
    </ul>
    <div class="job_div wow fadeIn" style="padding-bottom: 50px;padding-top: 50px" data-wow-delay="0s" data-wow-duration="2s">
        <input hidden name="select"  value="1 no">
        <img src="../../static/images/sorry.png" width="100px" height="100px"><p style="font-size: 20px;color: #1c5a89;font-weight: bold;margin-top: 10px;">此條件目前尚無資料，建議您試試其它相關條件</p>
    </div>
    {% endif %}
</form>
<form  id="company_send"  method="GET" action="{% url 'company' %}" >
    <input hidden name="get_local" value="">
    <input hidden name="get_skill" value="">
    <input hidden name="job" value="">
    <input hidden name="page" value="1 no">
    <input hidden name="extends_local" value="">
    <input hidden name="extends_type" value="">
    <input hidden name="certificate_user" value="">
</form>
<form id="trend_send" method="GET" action="{% url 'trend' %}" >
    <input hidden name="get_local" value="">
    <input hidden name="trend_function">
    <input hidden name="get_skill" value="">
    <input hidden name="job" value="">
    <input hidden name="extends_local" value="">
    <input hidden name="extends_type" value="">
</form>
<form id="popular_job_form" method="GET" action="{% url 'popular_job' %}" >
    <input hidden name="get_local" value="">
    <input hidden name="get_skill" value="">
    <input hidden name="job" value="">
    <input hidden name="page" value="1 no">
    <input hidden name="extends_local" value="">
    <input hidden name="extends_type" value="">
</form>
<script src="https://code.jquery.com/jquery-3.4.1.js"
integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="crossorigin="anonymous"></script>
<script src="../../static/js/clamp.js"></script>



{% for i in local %}
<script>
    var oox = new Set()
    $("#{{i.id}}").click(function(){
      $("#total_counny").hide()
      $("#inner_{{i.id}}").show()
      local_close()
      oox.add("{{i.id}}")
      local_type = "inner_{{i.id}}";
      if(document.getElementById("lo_screen").clientHeight>108){
        document.getElementById("lo_screen").style.height = "103px"
       document.getElementById("local_champ").style.display = "inline-block";
       document.getElementById('local_open').style.display = "none";
      }
    })
</script>
{% endfor %}

<script>
let coppzx = []
"{% for cer in certificate_user %}"
    coppzx.push("{{cer}}")
"{% endfor %}"
</script>

<script>

//jquery 實現django { CSRF }
jQuery(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});
    window.onload = function(){
        let header = document.getElementsByClassName('line-clamp-content')
        let open_header = document.getElementsByClassName('line-clamp-open')
        let job_line_he30 = document.getElementsByClassName('job_line_he30')
        for(let i=0;i<header.length;i++){
            if(header[i].clientHeight/50>3){
                open_header[i].innerHTML = '<span class="open_content">展開</span>';
                $clamp(header[i], {clamp:3, useNativeClamp: true,animate: true});
                job_line_he30[i].style.marginBottom = '0px'
            }
        }
        header = document.getElementsByClassName('line-clamp-content2')
        open_header = document.getElementsByClassName('line-clamp-open2')
        job_line_he30 = document.getElementsByClassName('job_line_he302')
        for(let i=0;i<header.length;i++){
            if(header[i].clientHeight/50>3){
                open_header[i].innerHTML = '<span class="open_content">展開</span>';
                $clamp(header[i], {clamp:3, useNativeClamp: true,animate: true});
                job_line_he30[i].style.marginBottom = '0px'
            }
        }
        header = document.getElementsByClassName('line-clamp-content3')
        open_header = document.getElementsByClassName('line-clamp-open3')
        job_line_he30 = document.getElementsByClassName('job_line_he303')
        for(let i=0;i<header.length;i++){
            if(header[i].clientHeight/50>2){
                open_header[i].innerHTML = '<span class="open_content">展開</span>';
                $clamp(header[i], {clamp:2, useNativeClamp: true,animate: true});
                job_line_he30[i].style.marginBottom = '0px'
            }
        }
        document.getElementById('company_submit').addEventListener('click',function(){
            let send_comp= document.getElementById('company_send');
            let send_job= document.getElementById('job_send');
            send_comp.get_local.value = send_job.get_local.value;
            send_comp.get_skill.value = send_job.get_skill.value;
            send_comp.job.value = send_job.job.value;
            send_comp.extends_type.value = send_job.extends_type.value;
            send_comp.extends_local.value = send_job.extends_local.value;
            send_comp.certificate_user.value = send_job.certificate_user.value;
            send_comp.submit()
        })
        document.getElementById('trend_submit').addEventListener('click',function(){
            let send= document.getElementById('trend_send');
            let send_job= document.getElementById('job_send');
            send.get_local.value = send_job.get_local.value;
            send.get_skill.value = send_job.get_skill.value;
            send.trend_function.value = 'job_count_trend';
            send.job.value = send_job.job.value;
            send.extends_type.value= send_job.extends_type.value;
            send.extends_local.value= send_job.extends_local.value;
            send.submit();
        })
        document.getElementById('popular_job').addEventListener('click',function(){
            let send= document.getElementById('popular_job_form');
            let send_job= document.getElementById('job_send');
            send.get_local.value = send_job.get_local.value;
            send.get_skill.value = send_job.get_skill.value;
            send.job.value = send_job.job.value;
            send.extends_type.value= send_job.extends_type.value;
            send.extends_local.value= send_job.extends_local.value;
            send.submit();
        })
        let search = document.getElementById('special_search')
        document.getElementById('select_date').addEventListener('click',select)
        document.getElementById('select_keyword').addEventListener('click',select2)
        document.getElementById('select_sort').addEventListener('click',select_sort)

        let count = 0
        document.getElementById('reset').addEventListener('click',function(){
            let input_exper =  document.getElementById('year_job_experience')
            input_exper.value='';
            input_exper.disabled=true;
            document.getElementById('user_ch_salary').value = ''
            let date = document.getElementsByClassName('date')
            let Educatioin = document.getElementsByClassName('Education')
            let experience = document.getElementsByClassName('experience')
            date[0].checked = true
            Educatioin[0].checked = true
            experience[0].checked= true
            document.getElementById('certificate_none').checked = true;
            document.getElementById('salary_none').checked = true;
            document.getElementById('condition_1').style.display = 'none';
            document.getElementById('condition_2').style.display = 'none';
            document.getElementById('condition_3').style.display = 'none';
            document.getElementById('condition_6').style.display = 'none';
            document.getElementById('condition_7').style.display = 'none';
            change_list();
        })
        document.getElementById('reset2').addEventListener('click',function(){
            document.getElementById('search_input').value = "";
            document.getElementById('condition_4').style.display = 'none';
            change_list();
        })
        document.getElementById('reset_sort').addEventListener('click',function(){
            document.getElementsByName('sorted')[0].checked = true;
            document.getElementById('condition_5').style.display = 'none';
            change_list();
        })
        if('{{select_date}}'!=''){
            let zz = '{{select_date}}';
            let condition1 =document.getElementById('condition_1');
            let date = document.getElementsByClassName('date');
            if(zz=='1'){
                date[1].checked=true;
                condition1.innerHTML = '當天、昨天更新   <image src="../../static/images/close.png" id="img1" width="20px" height ="20px"></image>'
            }else if(zz=='3'){
                date[2].checked=true;
                condition1.innerHTML = '三天前更新  <image src="../../static/images/close.png" id="img1" width="20px" height ="20px"></image>'
            }else if(zz=='7'){
                date[3].checked=true;
                condition1.innerHTML = '一周前更新  <image src="../../static/images/close.png" id="img1" width="20px" height ="20px"></image>'
            }else if(zz=='14'){
                date[4].checked=true;
                condition1.innerHTML = '兩周前更新   <image src="../../static/images/close.png" id="img1" width="20px" height ="20px"></image>'
            }
            condition1.style.display ="inline";
            document.getElementById('img1').addEventListener('click',function(){
                condition1.style.display = 'none';
                date[0].checked=true;
                count-=1;
                selected_count(count);
            })
            count+=1;
        }
        if('{{get_sorted}}' != ''){
            let zz = '{{get_sorted}}';
            let condition1 =document.getElementById('condition_5');
            let sorted= document.getElementsByName('sorted');
            if(zz=='date_max'){
                sorted[1].checked=true;
                condition1.innerHTML = '更新日期 : 新→舊  <image src="../../static/images/close.png" id="img5" width="20px" height ="20px"></image>'
            }else if(zz=='experience_max'){
                sorted[2].checked=true;
                condition1.innerHTML = '經歷 : 多→少  <image src="../../static/images/close.png" id="img5" width="20px" height ="20px"></image>'
            }else if(zz=='experience_low'){
                sorted[3].checked=true;
                condition1.innerHTML = '經歷 : 少→多  <image src="../../static/images/close.png" id="img5" width="20px" height ="20px"></image>'
            }else if(zz=='certificate_suitable'){
                sorted[4].checked=true;
                condition1.innerHTML = '證照符合 : 多→少  <image src="../../static/images/close.png" id="img5" width="20px" height ="20px"></image>'
            }else if(zz=='salary_suitable'){
                sorted[4].checked=true;
                condition1.innerHTML = '薪水 : 多→少  <image src="../../static/images/close.png" id="img5" width="20px" height ="20px"></image>'
            }
            condition1.style.display ="inline";
                document.getElementById('img5').addEventListener('click',function(){
                condition1.style.display = 'none';
                sorted[0].checked=true;
                count-=1;
                selected_count(count);
            })
            count+=1;
        }
        if('{{select_Education}}'!=''){
            let zz = '{{select_Education}}';
            let condition1 =document.getElementById('condition_2');
            let educatioin = document.getElementsByClassName('Education');
            if(zz=='secondary'){
                educatioin[1].checked=true;
                condition1.innerHTML = '國中  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }else if(zz=='highschool'){
                educatioin[2].checked=true;
                condition1.innerHTML = '高中  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }else if(zz=='Specialist'){
                educatioin[3].checked=true;
                condition1.innerHTML = '專科  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }else if(zz =='University'){
                educatioin[4].checked=true;
                condition1.innerHTML = '大學  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }else if(zz=='master'){
                educatioin[5].checked=true;
                condition1.innerHTML = '碩士  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }else if(zz=='phd'){
                educatioin[6].checked=true;
                condition1.innerHTML = '博士  <image src="../../static/images/close.png" id="img2" width="20px" height ="20px"></image>'
            }
            condition1.style.display ="inline";
            document.getElementById('img2').addEventListener('click',function(){
                condition1.style.display = 'none';
                educatioin[0].checked=true;
                count-=1;
                selected_count(count);
            })
            count+=1;
        }


        if('{{search_keyword}}' != ""){
            let condition =document.getElementById('condition_4');
            condition.innerHTML = '{{search_keyword}}   <image src="../../static/images/close.png" id="img4" width="20px" height ="20px"></image>'
            condition.style.display ="inline";
            document.getElementById('img4').addEventListener('click',function(){
                condition.style.display = 'none';
                document.getElementById('search_input').value = ""
                count-=1;
                selected_count(count);
            })
            count+=1;
        }

        if('{{select_experience}}'!=''){
            let zz = '{{select_experience}}';
            let condition1 =document.getElementById('condition_3');
            let experience = document.getElementsByClassName('experience')
            if(zz=='noexper'){
                experience[1].checked=true;
                condition1.innerHTML = '無經驗  <image src="../../static/images/close.png" id="img3" width="20px" height ="20px"></image>'
            }else{
                condition1.innerHTML = '{{Customize}}年以下  <image src="../../static/images/close.png" id="img3" width="20px" height ="20px"></image>'
                experience[2].checked=true;
                document.getElementById('year_job_experience').disabled = false;
            }
            condition1.style.display ="inline";
            document.getElementById('img3').addEventListener('click',function(){
                condition1.style.display = 'none';
                experience[0].checked=true;
                count-=1;
                selected_count(count);
            })
            count+=1;
        }
        
        
        if('{{certificate_select}}' != ""){
            let condition =document.getElementById('condition_7');
            condition.innerHTML = '無須證照  <image src="../../static/images/close.png" id="img7" width="20px" height ="20px"></image>'
            condition.style.display ="inline";
            document.getElementById('certificate_no').checked = true;
            document.getElementById('img7').addEventListener('click',function(){
                condition.style.display = 'none';
                document.getElementById('certificate_none').checked = true;
                count-=1;
                selected_count(count);
            })
            count+=1;
        }
        if('{{salary_select}}' != ''){
            let condition =document.getElementById('condition_6');
            condition.innerHTML = '月薪{{salary_select}}元以上   <image src="../../static/images/close.png" id="img6" width="20px" height ="20px"></image>'
            condition.style.display ="inline";
            document.getElementById('salary_change').checked = true;
            document.getElementById('user_ch_salary').disabled = false;
            document.getElementById('img6').addEventListener('click',function(){
                condition.style.display = 'none';
                count-=1
                selected_count(count)
                document.getElementById('salary_none').checked = true;
            })
            count+=1;
        }
        selected_count(count);
    }
    function addinput(event){
        skill_input = document.getElementById('skill1')
        let skill_now = event.innerHTML.replace("  &nbsp;","")
        if(!skill_input.value.toLowerCase().replace(',','、').split('、').includes(skill_now.toLowerCase())){
            if(skill_input.value.replace(" ","") ==''){
                skill_input.value +=skill_now
               if(document.getElementById(skill_now.toLowerCase()).className == "no_skill"){
                document.getElementById(skill_now.toLowerCase()).className = "yes_skill"
               }

            }else{
                skill_input.value +='、'+skill_now
                if(document.getElementById(skill_now.toLowerCase()).className == "no_skill"){
                document.getElementById(skill_now.toLowerCase()).className = "yes_skill"
               }
            }
        }
        
    }

    function selected_count(count){
        let date = document.getElementsByClassName('date')
        let Educatioin = document.getElementsByClassName('Education')
        let experience = document.getElementsByClassName('experience')
        if(count==1){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-1-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"/></svg>'
        }else if(count==2){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-2-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24c0-.691.493-1.306 1.336-1.306.756 0 1.313.492 1.313 1.236 0 .697-.469 1.23-.902 1.705l-2.971 3.293V12h5.344v-1.107H7.268v-.077l1.974-2.22.096-.107c.688-.763 1.287-1.428 1.287-2.43 0-1.266-1.031-2.215-2.613-2.215-1.758 0-2.637 1.19-2.637 2.402v.065h1.271v-.07Z"/></svg>'
        }else if(count==3){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-3-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-8.082.414c.92 0 1.535.54 1.541 1.318.012.791-.615 1.36-1.588 1.354-.861-.006-1.482-.469-1.54-1.066H5.104c.047 1.177 1.05 2.144 2.754 2.144 1.653 0 2.954-.937 2.93-2.396-.023-1.278-1.031-1.846-1.734-1.916v-.07c.597-.1 1.505-.739 1.482-1.876-.03-1.177-1.043-2.074-2.637-2.062-1.675.006-2.59.984-2.625 2.12h1.248c.036-.556.557-1.054 1.348-1.054.785 0 1.348.486 1.348 1.195.006.715-.563 1.237-1.342 1.237h-.838v1.072h.879Z"/></svg>'
        }else if(count==4){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-4-circle-fill"  style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM7.519 5.057c-.886 1.418-1.772 2.838-2.542 4.265v1.12H8.85V12h1.26v-1.559h1.007V9.334H10.11V4.002H8.176c-.218.352-.438.703-.657 1.055ZM6.225 9.281v.053H8.85V5.063h-.065c-.867 1.33-1.787 2.806-2.56 4.218Z"/></svg>'
        }else if(count==5){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-5-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-8.006 4.158c1.74 0 2.924-1.119 2.924-2.806 0-1.641-1.178-2.584-2.56-2.584-.897 0-1.442.421-1.612.68h-.064l.193-2.344h3.621V4.002H5.791L5.445 8.63h1.149c.193-.358.668-.809 1.435-.809.85 0 1.582.604 1.582 1.57 0 1.085-.779 1.682-1.57 1.682-.697 0-1.389-.31-1.53-1.031H5.276c.065 1.213 1.149 2.115 2.72 2.115Z"/></svg>'
        }else if(count==6){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-6-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM8.21 3.855c-1.868 0-3.116 1.395-3.116 4.407 0 1.183.228 2.039.597 2.642.569.926 1.477 1.254 2.409 1.254 1.629 0 2.847-1.013 2.847-2.783 0-1.676-1.254-2.555-2.508-2.555-1.125 0-1.752.61-1.98 1.155h-.082c-.012-1.946.727-3.036 1.805-3.036.802 0 1.213.457 1.312.815h1.29c-.06-.908-.962-1.899-2.573-1.899Zm-.099 4.008c-.92 0-1.564.65-1.564 1.576 0 1.032.703 1.635 1.558 1.635.868 0 1.553-.533 1.553-1.629 0-1.06-.744-1.582-1.547-1.582Z"/></svg>'
        }else if(count==7){
            let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-7-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM5.37 5.11h3.972v.07L6.025 12H7.42l3.258-6.85V4.002H5.369v1.107Z"/></svg>'
        }
        else{
            let search = document.getElementById('special_search')
            search.innerHTML = '特殊篩選';
            search.style.backgroundColor='#6c757d';
            search.style.color='#FFFFFF';
        }
    }

    function but_total(count){
        if(document.getElementsByClassName('but_open')[count-1].innerHTML=='顯示全部'){
            document.getElementsByClassName('job_skill')[count-1].style.display='block'
            document.getElementsByClassName('but_open')[count-1].innerHTML = '收起';
        }else{
            document.getElementsByClassName('job_skill')[count-1].style.display='none'
            document.getElementsByClassName('but_open')[count-1].innerHTML = '顯示全部';
        }
    }

        if('{{skill_hot}}' != ""){
            let condition =document.getElementById('condition_0');
            condition.innerHTML = '{{skill_hot}}   <image src="../../static/images/close.png" id="img0" width="20px" height ="20px"></image>'
            condition.style.display ="inline";
            document.getElementById('img0').addEventListener('click',function(){
                condition.style.display = 'none';
                document.getElementById('skill_hot').remove()
            })
        }
        
        function select_sort(){
            let cover = document.getElementsByClassName('cover')[0]
            let select_box = document.getElementById('select_box_sort')
            let story = document.getElementById('story_sort')

            cover.style.visibility='visible';
            cover.style.opacity='0.35';
            select_box.style.visibility='visible';
            select_box.style.opacity = '1';
            let out_select = document.getElementById('out_select_sort')
                out_select.addEventListener('click',function(){
                cover.style.visibility='hidden';
                cover.style.opacity='0';
                select_box.style.visibility='hidden';
                select_box.style.opacity = '0';
            })
            $('input[name="sorted"]').click(function() {
                change_list();
            });
            story.addEventListener('click',function(){
                document.getElementById('job_send').submit()
            })
        }

        function select2(){
            let cover = document.getElementsByClassName('cover')[0]
            let select_box = document.getElementById('select_box2')
            let story = document.getElementById('story2')

            cover.style.visibility='visible';
            cover.style.opacity='0.35';
            select_box.style.visibility='visible';
            select_box.style.opacity = '1';
            let out_select = document.getElementById('out_select2')
                out_select.addEventListener('click',function(){
                cover.style.visibility='hidden';
                cover.style.opacity='0';
                select_box.style.visibility='hidden';
                select_box.style.opacity = '0';
            })
            $('#search_input').blur(function(){
                if(document.getElementById("search_input").value != ""){
                    change_list();
                }
            })
            story.addEventListener('click',function(){
                document.getElementById('job_send').submit()
            })
        }


    function select(){
        let cover = document.getElementsByClassName('cover')[0]
        let select_box = document.getElementById('select_box')
        let story = document.getElementById('story')

        cover.style.visibility='visible';
        cover.style.opacity='0.35';
        select_box.style.visibility='visible';
        select_box.style.opacity = '1';
        let out_select = document.getElementById('out_select')
        let dis = document.getElementsByClassName('experience')
            for(let i=0;i<dis.length;i++){
                dis[i].addEventListener('click',function(){
                    if(dis[2].checked){
                        document.getElementById('year_job_experience').disabled = false;
                    }else{
                        document.getElementById('year_job_experience').disabled = true;
                    }
                })
            }
        let salary = document.getElementsByName('salary')
        for(let i=0;i<salary.length;i++){
            salary[i].addEventListener('click',function(event){
            if(salary[0].checked){
                document.getElementById('user_ch_salary').disabled = true;
            }else{
                document.getElementById('user_ch_salary').disabled = false;
            }
        })
        }
        out_select.addEventListener('click',function(){
            cover.style.visibility='hidden';
            cover.style.opacity='0';
            select_box.style.visibility='hidden';
            select_box.style.opacity = '0';
        })
        $('.date').click(function(){
            change_list();
        })
        $('.Education').click(function(){
            change_list();
        })
        $('.experience').click(function(){
            change_list();
        })
        $('.user_salary').click(function(){
            change_list();
        })
        $('.user_salary').click(function(){
            change_list();
        })
        story.addEventListener('click',function(){
            document.getElementById('job_send').submit()
        })
    }
    function change_list(){
        let search = document.getElementById('special_search')
            search.style.backgroundColor='#6495ED';
            search.style.color='RGB(220,220,220)';
            let count =0

            if(!document.getElementById('date0').checked){
                count+=1;
            }
            if(!document.getElementById('Education_none').checked){
                count+=1;
            }
            if(!document.getElementById('experience_none').checked){
                count+=1;

            }
            if(document.getElementById("search_input").value != ""){
                count+=1;
            }
            if(!document.getElementById('no_sort').checked){
                count+=1;
            }
            if(!document.getElementById('salary_none').checked){
                count+=1;
            }
            if(!document.getElementById('certificate_none').checked){
                count+=1;
            }
            if(count==1){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-1-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM9.283 4.002V12H7.971V5.338h-.065L6.072 6.656V5.385l1.899-1.383h1.312Z"/></svg>'
            }else if(count==2){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-2-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM6.646 6.24c0-.691.493-1.306 1.336-1.306.756 0 1.313.492 1.313 1.236 0 .697-.469 1.23-.902 1.705l-2.971 3.293V12h5.344v-1.107H7.268v-.077l1.974-2.22.096-.107c.688-.763 1.287-1.428 1.287-2.43 0-1.266-1.031-2.215-2.613-2.215-1.758 0-2.637 1.19-2.637 2.402v.065h1.271v-.07Z"/></svg>'
            }else if(count==3){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-3-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-8.082.414c.92 0 1.535.54 1.541 1.318.012.791-.615 1.36-1.588 1.354-.861-.006-1.482-.469-1.54-1.066H5.104c.047 1.177 1.05 2.144 2.754 2.144 1.653 0 2.954-.937 2.93-2.396-.023-1.278-1.031-1.846-1.734-1.916v-.07c.597-.1 1.505-.739 1.482-1.876-.03-1.177-1.043-2.074-2.637-2.062-1.675.006-2.59.984-2.625 2.12h1.248c.036-.556.557-1.054 1.348-1.054.785 0 1.348.486 1.348 1.195.006.715-.563 1.237-1.342 1.237h-.838v1.072h.879Z"/></svg>'
            }else if(count==4){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-4-circle-fill"  style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM7.519 5.057c-.886 1.418-1.772 2.838-2.542 4.265v1.12H8.85V12h1.26v-1.559h1.007V9.334H10.11V4.002H8.176c-.218.352-.438.703-.657 1.055ZM6.225 9.281v.053H8.85V5.063h-.065c-.867 1.33-1.787 2.806-2.56 4.218Z"/></svg>'
            }else if(count==5){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-5-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-8.006 4.158c1.74 0 2.924-1.119 2.924-2.806 0-1.641-1.178-2.584-2.56-2.584-.897 0-1.442.421-1.612.68h-.064l.193-2.344h3.621V4.002H5.791L5.445 8.63h1.149c.193-.358.668-.809 1.435-.809.85 0 1.582.604 1.582 1.57 0 1.085-.779 1.682-1.57 1.682-.697 0-1.389-.31-1.53-1.031H5.276c.065 1.213 1.149 2.115 2.72 2.115Z"/></svg>'
            }else if(count==6){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-6-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM8.21 3.855c-1.868 0-3.116 1.395-3.116 4.407 0 1.183.228 2.039.597 2.642.569.926 1.477 1.254 2.409 1.254 1.629 0 2.847-1.013 2.847-2.783 0-1.676-1.254-2.555-2.508-2.555-1.125 0-1.752.61-1.98 1.155h-.082c-.012-1.946.727-3.036 1.805-3.036.802 0 1.213.457 1.312.815h1.29c-.06-.908-.962-1.899-2.573-1.899Zm-.099 4.008c-.92 0-1.564.65-1.564 1.576 0 1.032.703 1.635 1.558 1.635.868 0 1.553-.533 1.553-1.629 0-1.06-.744-1.582-1.547-1.582Z"/></svg>'
            }else if(count==7){
                search.innerHTML = '特殊篩選'+'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-7-circle-fill" style="margin-left:10px;" viewBox="0 0 16 16"><path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0ZM5.37 5.11h3.972v.07L6.025 12H7.42l3.258-6.85V4.002H5.369v1.107Z"/></svg>'
            }
            else{
                search.innerHTML = '特殊篩選';
                search.style.backgroundColor='#6c757d';
                search.style.color='#FFFFFF';
            }
    }
    function skill_click(booleand){
        if(booleand.classList=='yes_skill'){
            booleand.classList = 'no_skill';
            let x = document.getElementsByClassName('get_skill')[0]
            let skill_list =  x.value.split('、')
            skill_list = skill_list.filter((item) => item !== booleand.id);
            x.value = skill_list.join('、')
        }else{
            booleand.classList = 'yes_skill';
            let x = document.getElementsByClassName('get_skill')[0]
            if(x.value.replace(" ","") ==''){
                x.value +=booleand.id
            }else{
                x.value +='、'+booleand.id
            }
        }
    }

    function certificate_click (event){
        let certificate_user = document.getElementsByName('certificate_user')[0]
        if(event.classList == 'yes_certificate'){
            event.classList = 'no_certificate'
            let certificate_list  =  certificate_user.value.split('、')
            certificate_list = certificate_list.filter((item) => item !== event.id);
            certificate_user.value = certificate_list.join('、')
        }else{
            event.classList = 'yes_certificate'
            if(certificate_user.value == ''){
                certificate_user.value  += event.id
            }else{
                certificate_user.value += '、'+event.id
            }
        }
    }
    document.getElementById('skill1').addEventListener('focus',remove_add_skill)
    document.getElementById('skill1').addEventListener('blur',remove_add_skill)
    function remove_add_skill(){
        let skill_list = document.getElementById('skill1').value.toLowerCase().replace(',',"、").split('、')
        document.getElementById('skill1').value = document.getElementById('skill1').value.replace(',',"、")
        "{% for sele_skill in dict_skill.keys %}"
            z ="{{sele_skill}}"
            if(skill_list.includes(z.toLowerCase())){
                if(document.getElementById('{{sele_skill|lower}}').classList.value != 'yes_skill'){
                    document.getElementById('{{sele_skill|lower}}').classList.value = 'yes_skill'
                }
            }else{
                if(document.getElementById('{{sele_skill|lower}}').classList.value != 'no_skill'){
                    document.getElementById('{{sele_skill|lower}}').classList.value = 'no_skill'
                }
            }
        "{% endfor %}"
    }


    function user_good(jobid,count){
        data_like = {
            'jobid':jobid,
        }
        if("{{user_name}}" !=""){
            $.ajax({
                url:'{% url "popular_job_add" %}',
                type:'POST',
                data:data_like,
                dataType:'json',

                success:function(mesg){
                    if(mesg.status == "no-login"){
                        swal({
                        title: "請登入",
                        text: mesg.message,
                        icon: "info",
                        button: "好的",
                        })
                    }else if(mesg.status == true){
                        nogood= document.getElementById(jobid).classList.toggle('user-nogood');
                        document.getElementById(jobid).classList.toggle('user-good');
                        if(nogood){
                            if(count==0){
                                $("#"+jobid).next().html("已有1人推薦這份工作")
                            }else{
                                $("#"+jobid).next().html("已有"+(parseInt(count)+1)+"人覺得這份工作好")
                            }

                        }else{
                            if(count==0){
                                $("#"+jobid).next().html("目前尚未有人推薦此工作")
                            }else{
                                $("#"+jobid).next().html("已有"+(parseInt(count)-1)+"人覺得這份工作好")
                            }
                        }
                    }
                },
                error:function(mesg){
                    console.log(mesg)
                }

            })
        }else{
            swal({
                        title: "請登入",
                        text: "請您先登入才可以推薦工作",
                        icon: "info",
                        button: "好的",
                        })
        }
    }
    
    document.getElementById('update_recommend').addEventListener('click',click_uupdate_skill)

    function click_uupdate_skill(){
        data_like = {
            'skill':document.getElementById('skill1').value,
        }
        if("{{user_name}}" !=""){
            swal({
            title: "是否更改推送技能!",
            text: "Whether to change push skills!",
            icon: "warning",
            buttons:['取消','是'],
            })
            .then((willDelete) => {

                    if(willDelete){
                        if(data_like["skill"] == ""){
                        swal({
                        title: "技能不可以為空!",
                        text: "請點選技能",
                        icon: "info",
                        button: "好的",
                        })
                    }else{
                        $.ajax({
                        url:'{% url "update_skilltorecom" %}',
                        type:'POST',
                        data:data_like,
                        dataType:'json',

                        success:function(mesg){
                            if(mesg.status == "no-login"){
                                swal({
                                title: "請登入",
                                text: mesg.message,
                                icon: "info",
                                button: "好的",
                                })
                            }else if(mesg.status == true){
                                swal({
                                title: "您已更改成功!",
                                text: "以將您要推薦的技能進行更改!",
                                icon: "success",
                                button: "好的",
                                })
                            }else{
                                swal({
                                title: "系統繁忙!",
                                text: "請稍後再嘗試!!",
                                icon: "error",
                                button: "好的",
                                })
                            }
                        }

            })
            }
                    }
            })
        }else{
            swal({
            title: "請登入",
            text: "請您先登入才可以將技能複製到推送設定中",
            icon: "info",
            button: "好的"
            })
        }
    }

    function open_line3(count){
        let open_cmp = document.getElementsByClassName('line-clamp-open3')[count-1]
        let header = document.getElementsByClassName('line-clamp-content3')[count-1]
        if(open_cmp.innerHTML == '<span class="open_content">展開</span>'){
            $clamp(header, {clamp:1000, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="close_content">收起</span>'
        }else{
            $clamp(header, {clamp:2, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="open_content">展開</span>'
        }
    }

    function open_line2(count){
        let open_cmp = document.getElementsByClassName('line-clamp-open2')[count-1]
        let header = document.getElementsByClassName('line-clamp-content2')[count-1]
        if(open_cmp.innerHTML == '<span class="open_content">展開</span>'){
            $clamp(header, {clamp:1000, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="close_content">收起</span>'
        }else{
            $clamp(header, {clamp:3, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="open_content">展開</span>'
        }



    }

    function open_line(count){
        let open_cmp = document.getElementsByClassName('line-clamp-open')[count-1]
        let header = document.getElementsByClassName('line-clamp-content')[count-1]
        if(open_cmp.innerHTML == '<span class="open_content">展開</span>'){
            $clamp(header, {clamp:1000, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="close_content">收起</span>'
        }else{
            $clamp(header, {clamp:3, useNativeClamp: true,animate: true});
            open_cmp.innerHTML = '<span class="open_content">展開</span>'
        }



    }
     function getStyle ( dom, attr ) {
        return getComputedStyle(dom)[attr]
        }
    function love(count){
        count  =count-1
        let loveno = document.getElementsByClassName('love1')
        let loveyes = document.getElementsByClassName('love2');
        if("{{user_name}}" !=""){
            if (getStyle(loveno[count],'display')== 'block' ){
                let user_skill = '{{get_skill}}';
                let jobid = document.getElementsByClassName('jobid')[count].innerHTML;

                data_like={
                    'jobid':jobid,
                    'user_skill':user_skill,
                    'type':'like'
                }
                let user_change_cer = document.getElementsByName('certificate_user')[0].value
                if(user_change_cer != ""){
                    data_like['certificate_user'] = user_change_cer
                }
                $.ajax({
                    url:'{% url "like" %}',
                    type:'POST',
                    data:data_like,
                    dataType:'json',

                    success:function(mesg){
                        if(mesg.status == "error"){
                            swal({
                            title: "資料超過上限",
                            text: mesg.message,
                            icon: "error",
                            button: "好的",
                            })
                        }else if(mesg.status == "no-login"){
                            swal({
                            title: "請登入",
                            text: mesg.message,
                            icon: "info",
                            button: "好的",
                            })
                        }else if(mesg.status == "true"){
                            loveno[count].style.display = "none" ;
                            loveyes[count].style.display= 'block';
                        }
                    },
                    error:function(mesg){
                        console.log(mesg)
                    }

                })
            }else{
                loveno[count].style.display= 'block';
                loveyes[count].style.display= 'none';
                let jobid = document.getElementsByClassName('jobid')[count].innerHTML;
                let user_skill = '{{get_skill}}';
                data_like={
                    'jobid':jobid,
                    'user_skill':user_skill,
                    'type':'like'
                }

                $.ajax({
                    url:'{% url "nolike" %}',
                    type:'POST',
                    data:data_like,
                    dataType:'json',

                    success:function(mesg){
                        if(mesg.status == "error"){
                            swal({
                            title: "資料超過上限",
                            text: mesg.message,
                            icon: "error",
                            button: "好的",
                            })
                        }else if(mesg.status == "no-login"){
                            swal({
                            title: "請登入",
                            text: mesg.message,
                            icon: "info",
                            button: "好的",
                            })
                        }
                    },
                    error:function(mesg){
                        console.log(mesg)
                    }

                })
            }
        }else{
            swal({
                title: "請登入",
                text: "請您先登入才可以加入我的最愛",
                icon: "info",
                button: "好的",
            })
        }
    }




</script>



<script>
    var remove_local = [];
    $('#out_select_local').click(function() {
    $('.cover:first').css({
        visibility: 'hidden',
        opacity: '0'
    });

    $('#select_box3').css({
        visibility: 'hidden',
        opacity: '0'
    });

    if ($('#lo_screen').height() > 108) {
        $('#lo_screen').height('80px');
        $('#local_champ').css('display', 'inline-block');
        $('#local_open').css('display', 'none');
    }

    $("#total_counny").show();
    if(local_type !=""){
        $("#"+ local_type).hide();
    }
    $("#last_page").hide();
    $("#ok_local").show();
    $("#ok_local_inner").hide();
    });
    var local_type =""
    var total_local = {}
    var ppa = {}
    var extend_local =   new Set();
    document.getElementById('get_local_submit').value =  '{{get_local | safe}}'




    let array_list = "{{extends_local}}"
    if(array_list != ""){
        array_list = array_list.split(",")
        for(let i=0;i<array_list.length;i++){
            if(array_list[i].includes('total')){
                let true_local = document.getElementsByClassName("input"+array_list[i].replace("total",""))
                for(let i=0;i<true_local.length;i++){
                    true_local[i].disabled = true
                }
            }
            document.getElementById(array_list[i]).checked = true;
        }
        
        let change_count = array_list.length
        if(change_count != 0){
            document.getElementById("skill2").innerHTML ="篩選地點"+" ("+array_list.length+")";
            document.getElementById("skill2").style.backgroundColor = "rgb(188, 230, 207)"
        }else{
            document.getElementById("skill2").innerHTML = "篩選地點";
            document.getElementById("skill2").style.backgroundColor = "rgb(75, 64, 49,0.2)"
        }
        let extends_type = "{{extends_type |safe }}".split(",")
        for(let i=0;i<extends_type.length;i++){
            oox.add(extends_type[i])
            local_type = "inner_"+extends_type[i];
            ok_local_function()
        }
    }



    var ppa = []
    $("#remove_local").click(function(){
        ok_lo_funct()

        $(".local_inner_span").hide()

        let inner_county = document.getElementsByClassName("inner_county")
        for(let i=0;i<inner_county.length;i++){
          if(inner_county[i].style.background =="rgb(168, 205, 233)"){
            inner_county[i].style.background = "rgb(255,255,255)"
            ppa.push({"i":i,"inner":inner_county[i].innerHTML})
            inner_county[i].innerHTML = inner_county[i].innerHTML.split(" ")[0]
          }
        }
        document.getElementById("remove_local").style.display = "none";
        $("#total_counny").show()
      $("#"+local_type).hide()
      $("#last_page").hide()
      $("#ok_local").show()
      $("#ok_local_inner").hide()
        document.getElementById("lo_screen").style.height = "auto" 
        document.getElementById("local_champ").style.display = "none"; 
       document.getElementById('local_open').style.display = "none";
      
      })



      function ok_lo_funct(){
        const checkboxes = document.querySelectorAll('input[type="checkbox"]');
          // 将所有 checkbox 的选中状态重置为未选中状态
          checkboxes.forEach((checkbox) => {
            checkbox.disabled = false;
            checkbox.checked = false;
          });
        $(".local_inner_span").remove()
        document.getElementsByName("extends_local")[0].value = "";
        document.getElementsByName("extends_type")[0].value = "";
        total_local = {}
        extend_local = new Set();
        oox = new Set();
        change_count = document.getElementsByClassName("local_inner_span").length
        if(change_count != 0){
            document.getElementById("skill2").innerHTML ="篩選地點"+" ("+document.getElementsByClassName("local_inner_span").length+")";
            document.getElementById("skill2").style.backgroundColor = "rgb(188, 230, 207)"
        }else{
            document.getElementById("skill2").innerHTML = "篩選地點";
            document.getElementById("skill2").style.backgroundColor = "rgb(75, 64, 49,0.2)"
        }
        document.getElementById('get_local_submit').value = '';
      }

      function none_out_select_local(){
        $(".local_inner_span").show()

        let inner_county = document.getElementsByClassName("inner_county")
        for(let i=0;i<ppa.length;i++){
            inner_county[ppa[i]["i"]].innerHTML = ppa[i]["inner"]
            inner_county[ppa[i]["i"]].style.background ="rgb(168, 205, 233)";
        }
        ppa = []
        if(document.getElementById("lo_screen").clientHeight>108){ document.getElementById("lo_screen").style.height = "103px" 
            document.getElementById("local_champ").style.display = "inline-block"; 
        document.getElementById('local_open').style.display = "none";
        }
      }



      $("#ok_local").click(function(){
      let change_count = document.getElementsByClassName("local_inner_span").length
      if(change_count != 0){
        document.getElementById("skill2").innerHTML ="篩選地點"+" ("+document.getElementsByClassName("local_inner_span").length+")";
        document.getElementById("skill2").style.backgroundColor = "rgb(188, 230, 207)"
      }else{
        document.getElementById("skill2").innerHTML = "篩選地點";
        document.getElementById("skill2").style.backgroundColor = "rgb(75, 64, 49,0.2)"
      }
      document.getElementsByName("extends_local")[0].value = Array.from(extend_local);
      document.getElementsByName("extends_type")[0].value = Array.from(oox);
      
    })

    $('#skill2').click(function(){
      let cover = document.getElementsByClassName('cover')[0] 
      let select_box = document.getElementById('select_box3')
        cover.style.visibility='visible';
        cover.style.opacity='0.55';
        select_box.style.visibility='visible';
        select_box.style.opacity = '1';
        document.getElementById("ok_local_inner").style.display = "none";
        if(document.getElementsByClassName("local_inner_span").length != 0 &&document.getElementById("remove_local").style.display != "inline-block")
        {
          let remove_local = document.getElementById("remove_local")
          remove_local.style.display = "inline-block"
          remove_local.innerHTML = "清除("+document.getElementsByClassName("local_inner_span").length +")"
        }else if(document.getElementsByClassName("local_inner_span").length == 0){
          document.getElementById("remove_local").style.display = "none"
        }
        else{
          remove_local.innerHTML = "清除("+document.getElementsByClassName("local_inner_span").length +")"
        }
    })
    function add_local_total(event){
        let local_class = "input"+event.id.replace("total","") 
      if(event.checked){  
        let true_local = document.getElementsByClassName(local_class)
        for(let i=0;i<true_local.length;i++){
          true_local[i].checked = false;
          true_local[i].disabled = true
        }
      }else{
        let false_local = document.getElementsByClassName(local_class)
        for(let i=0;i<false_local.length;i++){
          false_local[i].disabled  = false;
        }
      }
    }
    $("#last_page").click(function(){
      $("#total_counny").show()
      $("#"+local_type).hide()
      $("#last_page").hide()
      $("#ok_local").show()
      $("#ok_local_inner").hide()
      if(document.getElementsByClassName("local_inner_span").length != 0 &&document.getElementById("remove_local").style.display != "inline-block")
        {
          let remove_local = document.getElementById("remove_local")
          remove_local.style.display = "inline-block"
          remove_local.innerHTML = "清除("+document.getElementsByClassName("local_inner_span").length +")"
        }else if(document.getElementsByClassName("local_inner_span").length == 0){
          document.getElementById("remove_local").style.display = "none"
        }
        else{
          remove_local.innerHTML = "清除("+document.getElementsByClassName("local_inner_span").length +")"
        }
        if(document.getElementById("lo_screen").clientHeight>108){
        document.getElementById("lo_screen").style.height = "103px"
       document.getElementById("local_champ").style.display = "inline-block";
       document.getElementById('local_open').style.display = "none";
      }
    })
    $("#ok_local_inner").click(ok_local_function)
    function ok_local_function(){
        $("#total_counny").show()
        $("#"+local_type).hide()
        $("#last_page").hide()
        $("#ok_local").show()
        $("#ok_local_inner").hide()
        let zz = document.getElementsByClassName(local_type.replace("inner","input"));
        let name = document.getElementById(local_type.replace("inner_","")).innerHTML.split(' ')[0];
        let add_local = []
        let total_checkbox= document.getElementById(local_type.replace("inner","total"));
        if( !total_checkbox.checked){
            for(let i=0;i<zz.length;i++){
                if(zz[i].checked){
                    if(name in total_local){
                    if(!total_local[name].includes(zz[i].value))
                        total_local[name].push(zz[i].value)
                    }else{
                    total_local[name] =[zz[i].value]
                    }
                    add_local.push(zz[i].id)
                    extend_local.add(zz[i].id)
                }else{
                    if(total_local[name] != null){
                    const index = total_local[name].indexOf(zz[i].value);
                        if (index > -1) { // only splice array when item is found
                            total_local[name].splice(index, 1); // 2nd parameter means remove one item only
                            remove_local.push("_"+zz[i].id)
       
                            extend_local.delete(zz[i].id);
                        }
                    }
                }
            }
            if(total_local[name] != null){
            const index = total_local[name].indexOf(total_checkbox.value);
                if (index > -1) { // only splice array when item is found
                    total_local[name].splice(index, 1); // 2nd parameter means remove one item only
                    remove_local.push("_"+total_checkbox.id)
                    extend_local.delete(total_checkbox.className);
                }
            }
        }else{
            if(name in total_local){
                if(!total_local[name].includes(total_checkbox.value))
                    total_local[name].push(total_checkbox.value)
            }else{
                total_local[name] =[total_checkbox.value]
            }
            add_local.push(total_checkbox.id)
            extend_local.add(total_checkbox.id)
            for(let i=0;i<zz.length;i++){
            if(zz[i].checked){
                if(name in total_local){
                if(!total_local[name].includes(zz[i].value))
                    total_local[name].push(zz[i].value)
                }else{
                total_local[name] =[zz[i].value]
                }
                add_local.push(zz[i].id)
                extend_local.add(zz[i].id)
            }else{
                if(total_local[name] != null){
                const index = total_local[name].indexOf(zz[i].value);
                if (index > -1) { // only splice array when item is found
                    total_local[name].splice(index, 1); // 2nd parameter means remove one item only
                    remove_local.push("_"+zz[i].id)
                    extend_local.delete(zz[i].id);
                }
                }
            }
            }
            }
            if(name in total_local){
                let type_first = document.getElementById(local_type.replace("inner_",""))
                if(type_first.style.background !="rgb(168, 205, 233)"){
                    type_first.style.background = "rgb(168, 205, 233)";
                }
            if( !total_checkbox.checked){
                if(total_local[name].length !=0 ){
                    type_first.innerHTML = document.getElementById(local_type.replace("inner_","")).innerHTML.split(' ')[0] +"  "+ total_local[name].length;
                }else if(total_local[name].length ==0){
                    type_first.style.background = "rgb(255, 255, 255)"
                    type_first.innerHTML = document.getElementById(local_type.replace("inner_","")).innerHTML.split(' ')[0];
                }
                for(let i=0;i<total_local[name].length;i++){
                    if(document.getElementById("_"+add_local[i]) == null){
                        let span = document.createElement('span');
                        span.textContent = name +" "+ total_local[name][i];
                        span.style.backgroundColor = "rgb(169,197,231,0.5)";
                        span.style.padding = "5px";
                        span.style.marginLeft = "10px";
                        span.style.borderRadius = "10px";
                        span.style.display = "inline-block";
                        span.style.marginTop = "5px";
                        span.style.marginBottom = "5px";
                        span.classList.add("local_inner_span")
                        span.id = "_"+add_local[i]
                        document.getElementById('local_area').appendChild(span);
                    }
                }
            }else{
                if(total_local[name].length !=0 ){
                    type_first.innerHTML = document.getElementById(local_type.replace("inner_","")).innerHTML.split(' ')[0] +"  "+zz.length;
                }else if(total_local[name].length ==0){
                    type_first.style.background = "rgb(255, 255, 255)"
                    type_first.innerHTML = document.getElementById(local_type.replace("inner_","")).innerHTML.split(' ')[0];
                }
                if(document.getElementById("_"+total_checkbox.id) == null){
                    let span = document.createElement('span');
                    span.textContent = name;
                    span.style.backgroundColor = "rgb(169,197,231,0.5)";
                    span.style.padding = "5px";
                    span.style.marginLeft = "10px";
                    span.style.borderRadius = "10px";
                    span.style.display = "inline-block";
                    span.style.marginTop = "5px";
                    span.style.marginBottom = "5px";
                    span.classList.add("local_inner_span")
                    span.id = "_"+total_checkbox.id
                    document.getElementById('local_area').appendChild(span);
                }
            }
            for(let i=0;i<remove_local.length;i++){
                let element = document.getElementById(remove_local[i])
                if(element){
                    document.getElementById(remove_local[i]).remove();
                }
            }
            if(document.getElementsByClassName("local_inner_span").length != 0)
            {
                let remove_local = document.getElementById("remove_local")
                remove_local.style.display = "inline-block"
                remove_local.innerHTML = "清除("+document.getElementsByClassName("local_inner_span").length +")"
            }else if(document.getElementsByClassName("local_inner_span").length == 0){
                document.getElementById("remove_local").style.display = "none"
            }
            }
            // $('#out_select_local').click(change_select_local_now)
            if(document.getElementById("lo_screen").clientHeight>108){
                document.getElementById("lo_screen").style.height = "103px"
                document.getElementById("local_champ").style.display = "inline-block";
                document.getElementById('local_open').style.display = "none";
            }
    }
    // function change_select_local_now(){
    //     for(let i=0;i<remove_local.length;i++){
    //         $('#'+remove_local[i].replace('_','')).trigger('click');
    //         ok_local_function()
    //     }
    //     ok_local_function()
    //     remove_local = []
    // }

    function open_local_title(){
        document.getElementById('lo_screen').style.height = "auto";
        document.getElementById('local_open').style.display = "inline-block"
        document.getElementById("local_champ").style.display = "none";
      }

      function close_local_title(){
        document.getElementById('lo_screen').style.height = "103px";
        document.getElementById('local_open').style.display = "none"
        document.getElementById("local_champ").style.display = "inline-block";
      }

    $("#ok_local").click(function(){
        document.getElementById('get_local_submit').value =  JSON.stringify(total_local);
        let cover = document.getElementsByClassName('cover')[0] 
        let select_box = document.getElementById('select_box3')
        cover.style.visibility='hidden';
        cover.style.opacity='0';
        select_box.style.visibility='hidden';
        select_box.style.opacity = '0';
        if($('#lo_screen').height() > 108) {
          $('#lo_screen').height('80px');
          $('#local_champ').css('display', 'inline-block');
          $('#local_open').css('display', 'none');
      }


    })
        function local_close(){
        document.getElementById("ok_local").style.display = "none";
      document.getElementById("last_page").style.display = "inline-block";
      document.getElementById("ok_local_inner").style.display = "inline-block";
      }
</script>
{% if dict_number|length != 0%}
<script>
document.getElementsByName('certificate_user')[0].value = coppzx.join('、')
"{% if dict_skill|length != 0 %}"
        document.getElementById('skill_delete').addEventListener('click',function(){
            document.getElementById('skill1').value = '';
            $('.yes_skill').addClass('null_skill');
            $('.no_skill').addClass('null_skill');
            $('.no_skill').removeClass('no_skill');
            $('.yes_skill').removeClass('yes_skill');
        })
    "{% endif %}"

    "{% if job_certificate|length != 0 or certificate_user|length != 0 %}"
        document.getElementById('certificate_delete').addEventListener('click',function(){
            document.getElementsByName('certificate_user')[0].value = ''
            $('.yes_certificate').addClass('empty_certificate');
            $('.no_certificate').addClass('empty_certificate');
            $('.no_certificate').removeClass('no_certificate');
            $('.yes_certificate').removeClass('yes_certificate');
        })
    "{% endif %}"
</script>
{% endif %}
{% endblock %}
